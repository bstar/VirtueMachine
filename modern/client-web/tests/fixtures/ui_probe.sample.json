{
  "schema_version": 1,
  "mode": "sample",
  "tick": 4242,
  "runtime_profile": "canonical_strict",
  "runtime_extensions": {},
  "canonical_ui": {
    "avatar_panel": {
      "avatar": {
        "id": 1,
        "party_index": 0,
        "party_count": 3,
        "map_x": 307,
        "map_y": 347,
        "map_z": 0,
        "source_process": "legacy_party_active_resolution"
      },
      "portrait_hitbox": {
        "x": 272,
        "y": 16,
        "w": 16,
        "h": 16
      }
    },
    "inventory_panel": {
      "entries": [
        {
          "key": "0x073:0",
          "count": 1
        },
        {
          "key": "0x097:0",
          "count": 1
        },
        {
          "key": "0x0fa:2",
          "count": 3
        }
      ],
      "hitboxes": [
        {
          "index": 0,
          "x": 248,
          "y": 32,
          "w": 16,
          "h": 16,
          "source": "C_155D_1267"
        },
        {
          "index": 1,
          "x": 264,
          "y": 32,
          "w": 16,
          "h": 16,
          "source": "C_155D_1267"
        },
        {
          "index": 2,
          "x": 280,
          "y": 32,
          "w": 16,
          "h": 16,
          "source": "C_155D_1267"
        },
        {
          "index": 3,
          "x": 296,
          "y": 32,
          "w": 16,
          "h": 16,
          "source": "C_155D_1267"
        },
        {
          "index": 4,
          "x": 248,
          "y": 48,
          "w": 16,
          "h": 16,
          "source": "C_155D_1267"
        },
        {
          "index": 5,
          "x": 264,
          "y": 48,
          "w": 16,
          "h": 16,
          "source": "C_155D_1267"
        },
        {
          "index": 6,
          "x": 280,
          "y": 48,
          "w": 16,
          "h": 16,
          "source": "C_155D_1267"
        },
        {
          "index": 7,
          "x": 296,
          "y": 48,
          "w": 16,
          "h": 16,
          "source": "C_155D_1267"
        },
        {
          "index": 8,
          "x": 248,
          "y": 64,
          "w": 16,
          "h": 16,
          "source": "C_155D_1267"
        },
        {
          "index": 9,
          "x": 264,
          "y": 64,
          "w": 16,
          "h": 16,
          "source": "C_155D_1267"
        },
        {
          "index": 10,
          "x": 280,
          "y": 64,
          "w": 16,
          "h": 16,
          "source": "C_155D_1267"
        },
        {
          "index": 11,
          "x": 296,
          "y": 64,
          "w": 16,
          "h": 16,
          "source": "C_155D_1267"
        }
      ],
      "regression_probe_counts": {
        "inventory_to_equip": 96,
        "equip_to_inventory": 96
      }
    },
    "paperdoll_panel": {
      "slots": [
        {
          "index": 0,
          "key": "head",
          "legacy": "SLOT_HEAD",
          "object_key": null,
          "tile_hex": null
        },
        {
          "index": 1,
          "key": "neck",
          "legacy": "SLOT_NECK",
          "object_key": null,
          "tile_hex": null
        },
        {
          "index": 2,
          "key": "right_hand",
          "legacy": "SLOT_RHND",
          "slot": 2,
          "object_key": "0x12c:1",
          "tile_hex": "0x220"
        },
        {
          "index": 3,
          "key": "right_finger",
          "legacy": "SLOT_RFNG",
          "object_key": null,
          "tile_hex": null
        },
        {
          "index": 4,
          "key": "chest",
          "legacy": "SLOT_CHST",
          "slot": 4,
          "object_key": "0x090:0",
          "tile_hex": "0x210"
        },
        {
          "index": 5,
          "key": "left_hand",
          "legacy": "SLOT_LHND",
          "object_key": null,
          "tile_hex": null
        },
        {
          "index": 6,
          "key": "left_finger",
          "legacy": "SLOT_LFNG",
          "object_key": null,
          "tile_hex": null
        },
        {
          "index": 7,
          "key": "feet",
          "legacy": "SLOT_FEET",
          "slot": 7,
          "object_key": "0x0b0:1",
          "tile_hex": "0x21a"
        },
        {
          "index": 8,
          "key": "two_handed",
          "legacy": "SLOT_2HND",
          "object_key": null,
          "tile_hex": null
        },
        {
          "index": 9,
          "key": "ring",
          "legacy": "SLOT_RING",
          "object_key": null,
          "tile_hex": null
        }
      ],
      "hitboxes": [
        {
          "slot": 0,
          "key": "head",
          "x": 200,
          "y": 16,
          "w": 16,
          "h": 16,
          "source": "C_155D_130E"
        },
        {
          "slot": 1,
          "key": "neck",
          "x": 176,
          "y": 24,
          "w": 16,
          "h": 16,
          "source": "C_155D_130E"
        },
        {
          "slot": 4,
          "key": "chest",
          "x": 224,
          "y": 24,
          "w": 16,
          "h": 16,
          "source": "C_155D_130E"
        },
        {
          "slot": 2,
          "key": "right_hand",
          "x": 176,
          "y": 40,
          "w": 16,
          "h": 16,
          "source": "C_155D_130E"
        },
        {
          "slot": 5,
          "key": "left_hand",
          "x": 224,
          "y": 40,
          "w": 16,
          "h": 16,
          "source": "C_155D_130E"
        },
        {
          "slot": 3,
          "key": "right_finger",
          "x": 176,
          "y": 56,
          "w": 16,
          "h": 16,
          "source": "C_155D_130E"
        },
        {
          "slot": 6,
          "key": "left_finger",
          "x": 224,
          "y": 56,
          "w": 16,
          "h": 16,
          "source": "C_155D_130E"
        },
        {
          "slot": 7,
          "key": "feet",
          "x": 200,
          "y": 64,
          "w": 16,
          "h": 16,
          "source": "C_155D_130E"
        }
      ],
      "regression_probe_counts": {
        "equip_resolution_cases": 6,
        "equip_resolution_dropped_total": 2
      }
    },
    "party_panel": {
      "members": [
        {
          "id": 1,
          "name": "Avatar",
          "in_party": true,
          "active": true,
          "party_index": 0
        },
        {
          "id": 12,
          "name": "Iolo",
          "in_party": true,
          "active": false,
          "party_index": 1
        },
        {
          "id": 23,
          "name": "Shamino",
          "in_party": true,
          "active": false,
          "party_index": 2
        }
      ],
      "regression_probe_counts": {
        "selection_cases": 4
      }
    },
    "message_log_panel": {
      "entries": [
        {
          "tick": 4239,
          "level": "info",
          "text": "Party mode ready."
        },
        {
          "tick": 4240,
          "level": "system",
          "text": "Inventory refresh complete."
        },
        {
          "tick": 4241,
          "level": "info",
          "text": "Awaiting command."
        }
      ],
      "scrollback": {
        "window_size": 8,
        "scroll_offset": 0,
        "max_offset": 0
      },
      "regression_probe_counts": {
        "window_cases": 2,
        "scroll_command_cases": 4,
        "persistence_cases": 1
      }
    },
    "conversation_panel": {
      "active": false,
      "target_name": "",
      "target_obj_num": 0,
      "target_obj_type": 0,
      "portrait_tile_hex": null,
      "show_inventory": true,
      "equipment_slots": [
        {
          "index": 0,
          "key": "head",
          "legacy": "SLOT_HEAD",
          "object_key": null,
          "tile_hex": null
        },
        {
          "index": 1,
          "key": "neck",
          "legacy": "SLOT_NECK",
          "object_key": null,
          "tile_hex": null
        },
        {
          "index": 2,
          "key": "right_hand",
          "legacy": "SLOT_RHND",
          "slot": 2,
          "object_key": "0x12c:1",
          "tile_hex": "0x220"
        },
        {
          "index": 3,
          "key": "right_finger",
          "legacy": "SLOT_RFNG",
          "object_key": null,
          "tile_hex": null
        },
        {
          "index": 4,
          "key": "chest",
          "legacy": "SLOT_CHST",
          "object_key": null,
          "tile_hex": null
        },
        {
          "index": 5,
          "key": "left_hand",
          "legacy": "SLOT_LHND",
          "slot": 5,
          "object_key": "0x12e:1",
          "tile_hex": "0x208"
        },
        {
          "index": 6,
          "key": "left_finger",
          "legacy": "SLOT_LFNG",
          "object_key": null,
          "tile_hex": null
        },
        {
          "index": 7,
          "key": "feet",
          "legacy": "SLOT_FEET",
          "object_key": null,
          "tile_hex": null
        },
        {
          "index": 8,
          "key": "two_handed",
          "legacy": "SLOT_2HND",
          "object_key": null,
          "tile_hex": null
        },
        {
          "index": 9,
          "key": "ring",
          "legacy": "SLOT_RING",
          "object_key": null,
          "tile_hex": null
        }
      ]
    }
  },
  "canonical_contract_notes": {
    "inventory_and_paperdoll": "Slot and hitbox probes are anchored to C_155D_1267/C_155D_130E with deterministic inventory<->equip probe counts.",
    "conversation_panel": "C_27A1_02D9 / TALK_talkTo alignment surface. Live NPC equipment extraction pending; fields are canonicalized now."
  },
  "modern_ui": {
    "account_panel": {
      "source": "sample",
      "note": "Non-legacy account/auth controls are tracked separately from canonical gameplay UI."
    }
  },
  "canonical_runtime": {
    "target_resolver": {
      "regression_probe_counts": {
        "world_overlap_cases": 2,
        "talk_overlap_cases": 2
      }
    },
    "mechanics_capability": {
      "summary": {
        "total": 8,
        "implemented": 3,
        "partial": 1,
        "planned": 4
      },
      "validation": {
        "duplicate_keys": 0,
        "missing_legacy_anchors": 0,
        "missing_regression_gates": 0
      },
      "entries": [
        {
          "key": "world_navigation",
          "status": "implemented",
          "category": "core",
          "canonical": true,
          "legacy_anchor": "legacy/u6-decompiled/SRC/seg_0A33.c",
          "regression_gates": [
            "sim_core_replay_test",
            "sim_core_replay_checkpoints_test"
          ],
          "note": "Avatar movement/path input baseline is active."
        },
        {
          "key": "targeted_interaction_core",
          "status": "implemented",
          "category": "interaction",
          "canonical": true,
          "legacy_anchor": "legacy/u6-decompiled/SRC/seg_27A1.c",
          "regression_gates": [
            "modern/tools/test_client_web_ui_target_resolver.sh"
          ],
          "note": "Legacy-targeted verb cursor pipeline is active."
        },
        {
          "key": "inventory_pickup_drop_baseline",
          "status": "implemented",
          "category": "interaction",
          "canonical": true,
          "legacy_anchor": "legacy/u6-decompiled/SRC/seg_27A1.c",
          "regression_gates": [
            "modern/tools/test_client_web_ui_inventory_paperdoll.sh",
            "modern/tools/test_client_web_ui_paperdoll_equipment.sh"
          ],
          "note": "Get/drop baseline behavior and inventory projection are wired."
        },
        {
          "key": "conversation_opcode_engine",
          "status": "partial",
          "category": "interaction",
          "canonical": true,
          "legacy_anchor": "legacy/u6-decompiled/SRC/converse.c",
          "regression_gates": [
            "modern/tools/test_client_web_conversation.sh"
          ],
          "note": "Conversation opcode path is active but not feature-complete."
        },
        {
          "key": "combat_resolution",
          "status": "planned",
          "category": "systems",
          "canonical": true,
          "legacy_anchor": "legacy/u6-decompiled/SRC/combat.c",
          "regression_gates": [],
          "note": "Combat verbs route through placeholders pending full canonical resolution."
        },
        {
          "key": "spellcasting_resolution",
          "status": "planned",
          "category": "systems",
          "canonical": true,
          "legacy_anchor": "legacy/u6-decompiled/SRC/magic.c",
          "regression_gates": [],
          "note": "Cast command path exists; full spell resolution pending."
        },
        {
          "key": "npc_schedule_pathing",
          "status": "planned",
          "category": "systems",
          "canonical": true,
          "legacy_anchor": "legacy/u6-decompiled/SRC/npc.c",
          "regression_gates": [],
          "note": "NPC schedule/pathing systems are deferred."
        },
        {
          "key": "quest_state_progression",
          "status": "planned",
          "category": "systems",
          "canonical": true,
          "legacy_anchor": "legacy/u6-decompiled/SRC/converse.c",
          "regression_gates": [],
          "note": "Quest progression beyond dialogue scaffolding is deferred."
        }
      ],
      "verb_bindings": {
        "summary": {
          "total": 10,
          "implemented": 7,
          "partial": 1,
          "planned": 2,
          "unknown": 0
        },
        "entries": [
          {
            "verb": "a",
            "capability_key": "combat_resolution",
            "status": "planned"
          },
          {
            "verb": "c",
            "capability_key": "spellcasting_resolution",
            "status": "planned"
          },
          {
            "verb": "d",
            "capability_key": "inventory_pickup_drop_baseline",
            "status": "implemented"
          },
          {
            "verb": "g",
            "capability_key": "inventory_pickup_drop_baseline",
            "status": "implemented"
          },
          {
            "verb": "l",
            "capability_key": "targeted_interaction_core",
            "status": "implemented"
          },
          {
            "verb": "m",
            "capability_key": "targeted_interaction_core",
            "status": "implemented"
          },
          {
            "verb": "o",
            "capability_key": "targeted_interaction_core",
            "status": "implemented"
          },
          {
            "verb": "s",
            "capability_key": "targeted_interaction_core",
            "status": "implemented"
          },
          {
            "verb": "t",
            "capability_key": "conversation_opcode_engine",
            "status": "partial"
          },
          {
            "verb": "u",
            "capability_key": "targeted_interaction_core",
            "status": "implemented"
          }
        ]
      }
    }
  },
  "ui_scope": {
    "canonical_ui": [
      "avatar_panel",
      "inventory_panel",
      "paperdoll_panel",
      "party_panel",
      "message_log_panel",
      "conversation_panel"
    ],
    "modern_ui": [
      "account_panel"
    ]
  },
  "legacy_anchors": {
    "command_loop": "legacy/u6-decompiled/SRC/seg_0A33.c",
    "inventory_and_equipment": "legacy/u6-decompiled/SRC/seg_27a1.c",
    "equip_slot_layout": "legacy/u6-decompiled/SRC/seg_155D.c",
    "slot_constants": "legacy/u6-decompiled/SRC/u6.h"
  }
}
